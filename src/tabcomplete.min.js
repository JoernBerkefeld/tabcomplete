!function(t){function e(e,n,i){return t.grep(n,function(t){return i?!t.indexOf(e):!t.toLowerCase().indexOf(e.toLowerCase())})}function n(t){var e=this,n=e.prev(".hint");n.length||(n=e.clone().removeAttr("id name placeholder").addClass("hint"));var i="";if("undefined"!=typeof t){var a=e.val();i=a+t.substr(a.split(/ |\n/).pop().length)}n.val(i)}function i(e){var n=this,i=n.prev(".hint");n.css({backgroundColor:"transparent",position:"relative"}),i.length||(n.options.wrapInput&&n.wrap(t("<div>").css({position:"relative",height:n.css("height"),display:n.css("display")})),i=n.clone().attr("tabindex",-1).removeAttr("id name placeholder").addClass("hint").insertBefore(n),i.css({position:"absolute"}));var a="";if("undefined"!=typeof e){var r=n.val();a=r+e.substr(r.split(/ |\n/).pop().length)}i.val(a)}function a(t){var e=this,n=e.val();t&&(e.val(n+t.substr(n.split(/ |\n/).pop().length)),e[0].selectionStart=n.length)}var r={backspace:8,tab:9,up:38,down:40};t.tabcomplete={version:"1.5.1",defaultOptions:{after:"",arrowKeys:!1,hint:"none",match:e,caseSensitive:!1,minLength:1,wrapInput:!0}},t.fn.tab=t.fn.tabcomplete=function(e,s){if(this.length>1)return this.each(function(){t(this).tabcomplete(e,s)});var l=this.prop("tagName");if("INPUT"==l||"TEXTAREA"==l){this.options=s=t.extend(t.tabcomplete.defaultOptions,s),this.unbind(".tabcomplete"),this.prev(".hint").remove();var o=this,h=!1,p=-1,c=[],u="",v=t.noop;switch(s.hint){case"placeholder":v=i;break;case"select":v=a;break;case"none":v=n}return this.on("input.tabcomplete",function(){var n=o.val(),i=n.split(/ |\n/).pop();p=-1,u="",c=[],o[0].selectionStart==n.length&&i.length&&(c=s.match(i,e,s.caseSensitive),s.after&&(c=t.map(c,function(t){return t+s.after}))),o.trigger("match",c.length),s.hint&&(("select"!=s.hint||!h)&&i.length>=s.minLength?v.call(o,c[0]):v.call(o,"")),h&&(h=!1)}),this.on("keydown.tabcomplete",function(t){var e=t.which;if(e==r.tab||s.arrowKeys&&(e==r.up||e==r.down)){if(t.preventDefault(),e!=r.up)p++;else{if(-1==p)return;0===p?p=c.length-1:p--}var n=c[p%c.length];if(!n)return;var i=o.val();if(u=u||i.split(/ |\n/).pop(),u.length<s.minLength)return;var a="select"==s.hint?i:i.substr(0,o[0].selectionStart-u.length)+n;o.val(a),o[0].selectionStart=a.length,u=n,o.trigger("tabcomplete",u),s.hint&&v.call(o,"")}else t.which==r.backspace&&(h=!0,p=-1,u="")}),s.hint&&v.call(this,""),this}}}(jQuery);